# Notion 예약금 필드 사용 가이드

**목적:** Room 예약 시 예약금 영수증을 관리하기 위한 Notion 필드 사용 가이드입니다.
- **온라인 예약**: 고객이 예약 시 영수증을 직접 업로드 (자동 저장)
- **전화 예약**: 직원이 LINE에서 받은 영수증을 수동 업로드

---

## 📝 Notion 필드 (이미 설정 완료 ✅)

### 🎫 Deposit Receipt (영수증)

**필드 정보:**
- Property name: `Deposit Receipt`
- Property type: **Files & media**
- **상태:** ✅ 이미 존재함!

**데이터 소스:**
- **온라인 예약**: 고객이 프론트엔드에서 직접 업로드 → n8n이 자동 저장
- **전화 예약**: 직원이 LINE에서 받은 영수증을 수동 업로드

**지원 파일:**
- 이미지: JPG, PNG, HEIC (아이폰)
- 문서: PDF
- 파일 크기: 최대 5MB (일반적으로 200-500KB)

**영수증에 포함된 정보:**
- ✅ 입금 날짜/시간
- ✅ 입금 금액 (Room 1: 800 THB, Room 2: 400 THB)
- ✅ 입금자명
- ✅ 은행 정보

**장점:**
- 모든 예약의 영수증을 한곳에서 관리
- 온라인/오프라인 예약 동일한 방식으로 처리
- 자동 백업 및 검색 가능
- 중복 입력 불필요!

---

## 📊 기존 필드 활용

### 예약금 금액은?
- **Space Type** + **Room Number**로 자동 판단
  - Room 1 → 800 THB
  - Room 2 → 400 THB
  - Table/Hall → 예약금 없음

### 입금 상태는?
- **Status** 필드로 관리
  - `Pending` (예약대기) = 입금 전
  - `Confirmed` (확정) = 입금 완료
  - `Cancelled` (취소) = 취소

---

## 📊 View 추가 (선택사항)

### 💰 예약금 미입금 View

**목적:** 입금 대기 중인 Room 예약을 한눈에 확인

**설정:**
1. 데이터베이스 상단에서 `+ Add a view` 클릭
2. View name: `💰 예약금 미입금`
3. View type: **Table**
4. Filter 추가:
   - `Space Type` → `is` → `Room`
   - `Status` → `is` → `Pending`
   - `Deposit Receipt` → `is empty`
5. Sort 추가:
   - `Reservation DateTime` → Ascending (오래된 순)

**활용:**
- 아침에 이 View 확인하여 미입금 예약 체크
- 입금 기한 지난 예약 리마인더 전송

---

## 🎯 사용 시나리오

### 📱 시나리오 1: 온라인 Room 예약 (자동)

**고객 프로세스:**
```
1. 웹사이트 접속
   ↓
2. 날짜/지점/Room 선택
   ↓
3. 예약금 정보 자동 표시:
   💰 예약금: 800 THB (Room 1)
   🏦 은행: Kasikorn Bank
   계좌번호: 047-3-53876-8
   예금주: Bookmagol (Thailand)
   ⏰ 사용 시간: 3시간
   ↓
4. 은행 앱에서 입금
   ↓
5. 웹사이트로 돌아와서:
   - 연락처 정보 입력
   - 영수증 파일 업로드 (필수!)
   ↓
6. 예약하기 클릭
   ↓
7. ✅ 예약 즉시 확정!
```

**Notion 자동 저장:**
- Status: **Confirmed** (즉시 확정)
- Deposit Receipt: 영수증 파일 자동 업로드
- 모든 예약 정보 자동 입력
- **관리자 작업 불필요!** 🎉

---

### 📞 시나리오 2: 전화 Room 예약 (수동)

**고객 전화:** "내일 저녁 6시에 Room 1 예약하고 싶어요."

**직원 작업:**
1. Notion에서 새 예약 생성 (`+ New`)
2. 기본 정보 입력:
   - 예약일시: 2025-11-01 18:00
   - 지점: Ekamai
   - 공간유형: Room
   - 룸번호: Room 1
   - 인원: 6명
   - 이름: 홍길동
   - 전화: 095-123-4567
   - **Status: Pending** ← 입금 대기
   - Deposit Receipt: 비워둠

3. 고객에게 안내:
   ```
   "예약금 800바트를 입금해주세요.
   
   입금 계좌:
   - 은행: Kasikorn Bank
   - 계좌번호: 047-3-53876-8
   - 예금주: Bookmagol (Thailand)
   
   입금 후 북막골 LINE(@853oabjm)으로 
   영수증과 예약자명을 보내주세요!"
   ```

4. **고객이 LINE으로 영수증 전송**
   ↓
5. **직원 확인 및 업데이트:**
   - LINE에서 영수증 확인 (금액 체크)
   - 영수증 이미지 저장
   - Notion에서 해당 예약 찾기
   - **Deposit Receipt**: 영수증 업로드
   - **Status**: Pending → **Confirmed**
   ↓
6. 고객에게 확정 메시지:
   ```
   "홍길동님, 입금 확인했습니다!
   11월 1일 저녁 6시 Room 1 예약 확정!
   3시간 이용 가능합니다. 😊"
   ```

---

### 🍽️ 시나리오 3: Table 예약 (예약금 없음)

**온라인/전화 공통:**
- 예약금 정보 표시 안 됨
- 영수증 업로드 불필요
- Status: 바로 **Confirmed**
- Deposit Receipt: 비워둠 (해당 없음)

---

## 🔍 관리자 운영 가이드

### 💰 예약금 미입금 View (전화 예약용)

**View 설정:**
1. `+ Add a view` 클릭
2. Name: `💰 예약금 미입금 (전화)`
3. Filters:
   - Space Type = Room
   - Status = Pending
   - Deposit Receipt is empty
4. Sort: Reservation DateTime (오래된 순)

**매일 체크:**
- 전화 예약 중 입금 대기 중인 건 확인
- LINE에서 영수증 받으면 즉시 처리
- 미입금 오래된 건 리마인더 전송

---

### ✅ 온라인 예약 확인 (자동 처리됨)

**확인 사항:**
1. Status = **Confirmed** (자동 설정)
2. Deposit Receipt = **파일 있음** (고객 업로드)
3. 모든 정보 자동 입력됨

**관리자 작업:**
- 영수증 금액 육안 확인 (선택사항)
- 의심스러운 경우만 고객에게 연락
- **대부분 자동 처리!** 🎉

---

### 🚨 문제 상황 처리

#### Case 1: 온라인 예약 - 잘못된 영수증
```
상황: 고객이 다른 금액 영수증 업로드
처리:
1. 고객에게 이메일/전화 연락
2. 올바른 영수증 요청
3. LINE으로 재전송 받아 수동 업로드
4. 또는 Status → Cancelled
```

#### Case 2: 전화 예약 - 영수증 안 보냄
```
상황: 입금했다고 하지만 영수증 안 보냄
처리:
1. LINE으로 리마인더 발송
2. 은행 거래내역 직접 확인
3. 확인되면 Status → Confirmed
4. 미확인 시 예약 취소 안내
```

---

## ✅ 체크리스트

### 시스템 준비 (완료 ✅)
- [x] Notion 필드 설정 완료
  - [x] Deposit Receipt (Files & media) ✅
- [x] 은행 계좌 정보 확정
  - 은행: Kasikorn Bank
  - 계좌: 047-3-53876-8
  - 예금주: Bookmagol (Thailand)
- [ ] "💰 예약금 미입금" View 생성 (전화 예약용)
- [ ] 웹사이트 업데이트 (영수증 업로드 기능)
- [ ] n8n 워크플로우 수정 (파일 업로드 처리)

### 매일 운영
- [ ] **온라인 예약**: 자동 처리됨 (확인만)
  - Confirmed 상태인지 확인
  - 영수증 파일 있는지 확인
  - 의심 건만 연락
- [ ] **전화 예약**: 수동 처리
  - LINE 영수증 받으면 즉시 업로드
  - Status → Confirmed 변경
  - 고객에게 확정 연락
- [ ] 미입금 예약 리마인더 (전화 예약만)

---

## 💡 핵심 포인트

### 🎯 온라인 예약 (NEW!)
```
고객이 영수증 업로드 → 즉시 Confirmed → 관리자는 확인만!
```
- **고객 경험**: 예약 즉시 확정! ⚡
- **관리자 부담**: 거의 없음! 🎉
- **노쇼 방지**: 100% 입금 후 예약 ✅

### 📞 전화 예약 (기존)
```
예약 접수 → Pending → LINE 영수증 → 업로드 → Confirmed
```
- 직원이 수동으로 영수증 관리
- LINE에서 받은 영수증 Notion에 업로드
- Status 수동 변경

### 🔑 공통 원칙

1. **예약금 금액 자동 판단**
   - Room 1 → 800 THB
   - Room 2 → 400 THB
   - Table → 예약금 없음

2. **Status = 입금 상태**
   - Pending = 입금 대기 (전화 예약만)
   - Confirmed = 입금 완료
   - Cancelled = 취소

3. **영수증이 증거**
   - Deposit Receipt 파일 = 입금 증명
   - 금액, 날짜, 입금자 모두 포함
   - 중복 입력 불필요

4. **3시간 사용**
   - Room 예약은 모두 3시간 이용
   - 종료 시간 자동 계산

---

## 📊 비교표

| 항목 | 온라인 예약 | 전화 예약 |
|------|------------|----------|
| 예약금 안내 | 웹사이트 자동 표시 | 직원이 구두 안내 |
| 영수증 업로드 | 고객이 직접 업로드 | 직원이 수동 업로드 |
| Notion 저장 | n8n 자동 저장 | 직원 수동 입력 |
| Status | 자동 Confirmed | 수동 Pending → Confirmed |
| 관리자 작업 | 확인만 | 영수증 업로드 + Status 변경 |
| 확정 속도 | 즉시 ⚡ | LINE 영수증 후 |

**온라인 예약이 훨씬 효율적! 🚀**
