# 북막골 예약 시스템 - 통합 테스트 가이드

## 테스트 전 준비사항

### 1. Notion 설정 확인
- [ ] Notion 데이터베이스가 생성되어 있는지 확인
- [ ] Integration API 키가 발급되어 있는지 확인  
- [ ] 모든 Properties가 올바르게 설정되어 있는지 확인
- [ ] Views가 정상적으로 생성되어 있는지 확인

### 2. n8n 워크플로우 설정
- [ ] 3개 워크플로우 JSON 파일을 n8n에 import
- [ ] 각 워크플로우에서 다음 값들을 실제 값으로 교체:
  - `YOUR_NOTION_DATABASE_ID` → 실제 Notion 데이터베이스 ID
  - `RESTAURANT_ADMIN_EMAIL@example.com` → 실제 식당 관리자 이메일
- [ ] Gmail 연동 설정 (OAuth2 인증)
- [ ] Notion 연동 설정 (Integration Token)

### 3. 프론트엔드 설정
- [ ] `index.html`에서 `YOUR_N8N_WEBHOOK_URL`을 실제 webhook URL로 교체
- [ ] GitHub Pages 또는 웹 호스팅에 업로드

## 테스트 시나리오

### 시나리오 1: 한국어 룸 예약 (정상 플로우)

**테스트 데이터:**
- 언어: 한국어
- 지점: Ekamai
- 날짜: 내일
- 시간: 18:00
- 공간: 룸 - 1번룸
- 인원: 4명
- 이름: 김테스트
- 전화: 010-1234-5678
- 이메일: test.korean@example.com

**예상 결과:**
1. 예약 폼 제출 → 성공 메시지와 예약번호 표시
2. 식당 관리자에게 한국어 알림 이메일 발송
3. Notion에 예약 데이터 저장 (상태: 예약대기)

**검증 포인트:**
- [ ] 웹 폼에서 성공 메시지 확인
- [ ] 관리자 이메일 수신 확인
- [ ] Notion 데이터베이스에 정확한 데이터 저장 확인

### 시나리오 2: 태국어 홀 예약

**테스트 데이터:**
- 언어: ไทย
- 지점: Phrom Phong
- 날짜: 모레
- 시간: 12:00
- 공간: 홀 - 1층
- 인원: 8명
- 이름: ทดสอบ
- 전화: 081-234-5678
- 이메일: test.thai@example.com

**예상 결과:**
1. 예약 접수 성공
2. 태국어로 관리자 알림 이메일 발송
3. Notion에 저장

### 시나리오 3: 영어 중복 예약 (오류 테스트)

**테스트 데이터:**
- 시나리오 1과 동일한 날짜/시간/지점/룸으로 예약 시도
- 언어: English

**예상 결과:**
1. 중복 예약 오류 메시지 표시
2. 예약 처리되지 않음
3. 이메일 발송되지 않음

### 시나리오 4: 예약 확정 테스트

**테스트 절차:**
1. 시나리오 1의 예약을 Notion에서 "확정" 상태로 변경
2. 워크플로우 2가 자동 실행되는지 확인

**예상 결과:**
1. 고객(test.korean@example.com)에게 한국어 확정 이메일 발송
2. 이메일 내용에 예약 정보, 지점 정보, 구글맵 링크 포함

### 시나리오 5: 리마인더 테스트

**테스트 절차:**
1. 시나리오 1의 예약 날짜를 내일로 설정
2. 워크플로우 3을 수동 실행 (또는 시간 변경하여 자동 실행)

**예상 결과:**
1. 고객에게 한국어 리마인더 이메일 발송
2. Notion에서 "리마인더발송" 체크박스가 true로 변경

## 모바일 테스트

### 기기별 테스트
- [ ] iPhone Safari
- [ ] Android Chrome
- [ ] 라인 인앱 브라우저

### 체크 포인트
- [ ] 반응형 레이아웃 정상 작동
- [ ] 터치 인터페이스 정상 작동
- [ ] 언어 전환 정상 작동
- [ ] 폼 입력 및 제출 정상 작동
- [ ] 로딩 상태 및 메시지 표시

## 3개 언어 테스트

### 한국어 테스트
- [ ] UI 모든 텍스트가 한국어로 표시
- [ ] 확정 이메일이 한국어로 발송
- [ ] 리마인더 이메일이 한국어로 발송
- [ ] 날짜/시간 형식이 한국 형식

### 태국어 테스트
- [ ] UI 모든 텍스트가 태국어로 표시
- [ ] 확정 이메일이 태국어로 발송
- [ ] 리마인더 이메일이 태국어로 발송
- [ ] 날짜/시간 형식이 태국 형식

### 영어 테스트
- [ ] UI 모든 텍스트가 영어로 표시
- [ ] 확정 이메일이 영어로 발송
- [ ] 리마인더 이메일이 영어로 발송
- [ ] 날짜/시간 형식이 영어 형식

## 오류 케이스 테스트

### 1. 필수 항목 누락
- [ ] 지점 미선택 시 오류 메시지
- [ ] 날짜 미선택 시 오류 메시지
- [ ] 시간 미선택 시 오류 메시지
- [ ] 공간 미선택 시 오류 메시지
- [ ] 이름 미입력 시 오류 메시지
- [ ] 전화번호 미입력 시 오류 메시지
- [ ] 이메일 미입력 시 오류 메시지

### 2. 형식 오류
- [ ] 잘못된 이메일 형식 입력 시 오류
- [ ] 과거 날짜 선택 시 오류
- [ ] 영업시간 외 시간 선택 불가

### 3. 네트워크 오류
- [ ] n8n 서버 연결 실패 시 오류 메시지
- [ ] 타임아웃 발생 시 처리

## 성능 테스트

### 응답 시간 측정
- [ ] 예약 폼 제출 → 응답: 5초 이내
- [ ] 중복 체크 → 응답: 3초 이내
- [ ] 페이지 로딩: 2초 이내

### 동시 접속 테스트
- [ ] 여러 사용자 동시 예약 시도
- [ ] 중복 예약 방지 로직 정상 작동

## 문제 해결 가이드

### 일반적인 문제들

**1. Webhook 연결 실패**
- n8n 워크플로우가 활성화되어 있는지 확인
- Webhook URL이 정확한지 확인
- CORS 설정 확인

**2. Notion 연동 실패**
- Integration Token이 유효한지 확인
- 데이터베이스 권한 설정 확인
- Property 이름이 정확한지 확인

**3. 이메일 발송 실패**
- Gmail OAuth2 인증 상태 확인
- 발송 권한 확인
- 스팸 필터 확인

**4. 중복 체크 오작동**
- 날짜/시간 형식 확인
- 필터 조건 확인
- 타임존 설정 확인

## 테스트 완료 체크리스트

- [ ] 모든 시나리오 테스트 완료
- [ ] 3개 언어 모두 정상 작동
- [ ] 모바일 환경 정상 작동
- [ ] 오류 케이스 적절히 처리
- [ ] 성능 요구사항 충족
- [ ] 관리자 교육 완료

테스트 완료 후 실제 서비스 운영을 시작할 수 있습니다.

