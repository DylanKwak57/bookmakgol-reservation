{
  "name": "ë¶ë§‰ê³¨_ë²„íŠ¼ì²˜ë¦¬ì‹œìŠ¤í…œ",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "GET",
        "path": "bookmakgol-admin",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "1a2b3c4d-5e6f-7a8b-9c0d-1e2f3a4b5c6d",
      "name": "ê´€ë¦¬ì ë²„íŠ¼ Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        240,
        300
      ],
      "webhookId": "bookmakgol-admin"
    },
    {
      "parameters": {
        "functionCode": "// URL íŒŒë¼ë¯¸í„° íŒŒì‹± ë° ì•¡ì…˜ ê²°ì •\nconst query = items[0].json.query || {};\nconst action = items[0].json.path.includes('/confirm') ? 'confirm' : 'cancel';\nconst bookingNumber = query.id;\n\nif (!bookingNumber) {\n  return [{\n    json: {\n      error: true,\n      message: 'Booking ID is required'\n    }\n  }];\n}\n\nreturn [{\n  json: {\n    action: action,\n    bookingNumber: bookingNumber,\n    error: false\n  }\n}];"
      },
      "id": "2b3c4d5e-6f7a-8b9c-0d1e-2f3a4b5c6d7e",
      "name": "ì•¡ì…˜ íŒŒì‹±",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        440,
        300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{$json.error}}",
              "value2": true
            }
          ]
        }
      },
      "id": "3c4d5e6f-7a8b-9c0d-1e2f-3a4b5c6d7e8f",
      "name": "ì˜¤ë¥˜ ì²´í¬",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        640,
        300
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"status\": \"error\",\n  \"message\": \"{{$json.message}}\"\n}",
        "options": {}
      },
      "id": "4d5e6f7a-8b9c-0d1e-2f3a-4b5c6d7e8f9a",
      "name": "ì˜¤ë¥˜ ì‘ë‹µ",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        840,
        200
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": "284a2fb1-c15d-81a1-9d93-d4f47300f2e3",
        "returnAll": false,
        "limit": 1,
        "filterType": "manual",
        "matchType": "and",
        "filters": {
          "conditions": [
            {
              "key": "Booking Number",
              "condition": "equals",
              "value": "={{$json.bookingNumber}}"
            }
          ]
        }
      },
      "id": "5e6f7a8b-9c0d-1e2f-3a4b-5c6d7e8f9a0b",
      "name": "ì˜ˆì•½ ì¡°íšŒ",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        840,
        400
      ]
    },
    {
      "parameters": {
        "conditions": {
          "number": [
            {
              "value1": "={{$json.length}}",
              "operation": "equal",
              "value2": 0
            }
          ]
        }
      },
      "id": "6f7a8b9c-0d1e-2f3a-4b5c-6d7e8f9a0b1c",
      "name": "ì˜ˆì•½ ì¡´ì¬ í™•ì¸",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1040,
        400
      ]
    },
    {
      "parameters": {
        "respondWith": "html",
        "responseBody": "<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ì˜ˆì•½ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</title>\n    <style>\n        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }\n        .error { color: #dc3545; }\n    </style>\n</head>\n<body>\n    <h2 class=\"error\">âŒ ì˜ˆì•½ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>\n    <p>ì˜ˆì•½ë²ˆí˜¸: {{$json.bookingNumber}}</p>\n    <p>ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì˜ˆì•½ì…ë‹ˆë‹¤.</p>\n</body>\n</html>",
        "options": {}
      },
      "id": "7a8b9c0d-1e2f-3a4b-5c6d-7e8f9a0b1c2d",
      "name": "ì˜ˆì•½ ì—†ìŒ ì‘ë‹µ",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        1240,
        300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.action}}",
              "operation": "equal",
              "value2": "confirm"
            }
          ]
        }
      },
      "id": "8b9c0d1e-2f3a-4b5c-6d7e-8f9a0b1c2d3e",
      "name": "ì•¡ì…˜ ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1240,
        500
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "update",
        "pageId": "={{$json[1].id}}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Status",
              "selectValue": "Confirmed"
            }
          ]
        }
      },
      "id": "9c0d1e2f-3a4b-5c6d-7e8f-9a0b1c2d3e4f",
      "name": "ì˜ˆì•½ í™•ì • ì—…ë°ì´íŠ¸",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        1440,
        400
      ]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "update",
        "pageId": "={{$json[1].id}}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Status",
              "selectValue": "Cancelled"
            }
          ]
        }
      },
      "id": "0d1e2f3a-4b5c-6d7e-8f9a-0b1c2d3e4f5a",
      "name": "ì˜ˆì•½ ì·¨ì†Œ ì—…ë°ì´íŠ¸",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [
        1440,
        600
      ]
    },
    {
      "parameters": {
        "functionCode": "// ê³ ê° ì •ë³´ ì¶”ì¶œ ë° ì´ë©”ì¼ ë°ì´í„° ì¤€ë¹„\nconst reservationData = items[0].json[1];\nconst actionData = items[0].json[0];\nconst properties = reservationData.properties;\n\n// ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ\nconst bookingNumber = properties['Booking Number'].title[0].plain_text;\nconst dateTime = new Date(properties['Reservation DateTime'].date.start);\nconst branch = properties['Branch'].select.name;\nconst spaceType = properties['Space Type'].select.name;\nconst roomNumber = properties['Room Number']?.select?.name;\nconst floor = properties['Floor']?.select?.name;\nconst guests = properties['Guests'].number;\nconst name = properties['Name'].rich_text[0].plain_text;\nconst email = properties['Email'].email;\nconst language = properties['Language'].select.name;\nconst specialRequest = properties['Special Request']?.rich_text[0]?.plain_text || '';\n\n// ì–¸ì–´ë³„ ì„¤ì •\nconst langCode = language === 'Korean' ? 'ko' : language === 'Thai' ? 'th' : 'en';\n\n// ë‚ ì§œ í¬ë§·íŒ…\nconst dateFormatted = {\n  ko: dateTime.toLocaleDateString('ko-KR', {\n    timeZone: 'Asia/Bangkok',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    weekday: 'long'\n  }),\n  th: dateTime.toLocaleDateString('th-TH', {\n    timeZone: 'Asia/Bangkok',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    weekday: 'long'\n  }),\n  en: dateTime.toLocaleDateString('en-US', {\n    timeZone: 'Asia/Bangkok',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    weekday: 'long'\n  })\n};\n\nconst timeFormatted = dateTime.toLocaleTimeString('en-US', {\n  timeZone: 'Asia/Bangkok',\n  hour: '2-digit',\n  minute: '2-digit',\n  hour12: false\n});\n\n// ì§€ì  ì •ë³´\nconst branchInfo = {\n  'Ekamai': {\n    ko: { name: 'ì—ê¹Œë§ˆì´ ì§€ì ', address: 'ì—ì¹´ë§ˆì´ BTS 4ë²ˆ ì¶œêµ¬, ìˆ˜ì¿°ìœ— ë³‘ì› ë§ì€í¸', phone: '095-868-6826' },\n    th: { name: 'à¸ªà¸²à¸‚à¸²à¹€à¸­à¸à¸¡à¸±à¸¢', address: 'BTS à¹€à¸­à¸à¸¡à¸±à¸¢ à¸—à¸²à¸‡à¸­à¸­à¸ 4 à¸•à¸£à¸‡à¸‚à¹‰à¸²à¸¡à¹‚à¸£à¸‡à¸à¸¢à¸²à¸šà¸²à¸¥à¸ªà¸¸à¸‚à¸¸à¸¡à¸§à¸´à¸—', phone: '095-868-6826' },\n    en: { name: 'Ekamai Branch', address: 'BTS Ekamai Exit 4, opposite Sukhumvit Hospital', phone: '095-868-6826' }\n  },\n  'Phrom Phong': {\n    ko: { name: 'í”„ë¡¬í ì§€ì ', address: 'ìˆ˜ì¿°ìœ— ì†Œì´ 24, ì•„ë¦¬ìŠ¤í†¤ í˜¸í…” 1ì¸µ', phone: '02-115-5500' },\n    th: { name: 'à¸ªà¸²à¸‚à¸²à¸à¸£à¹‰à¸­à¸¡à¸à¸‡à¸©à¹Œ', address: 'à¸ªà¸¸à¸‚à¸¸à¸¡à¸§à¸´à¸— à¸‹à¸­à¸¢ 24 à¸Šà¸±à¹‰à¸™ 1 à¹‚à¸£à¸‡à¹à¸£à¸¡à¸­à¸£à¸´à¸ªà¸•à¸±à¸™', phone: '02-115-5500' },\n    en: { name: 'Phrom Phong Branch', address: 'Sukhumvit Soi 24, 1st Floor Ariston Hotel', phone: '02-115-5500' }\n  }\n};\n\n// ê³µê°„ ì •ë³´\nconst spaceInfo = {\n  ko: spaceType === 'Room' ? `ë£¸ ${roomNumber}` : `í™€ ${floor}`,\n  th: spaceType === 'Room' ? `à¸«à¹‰à¸­à¸‡${roomNumber.replace('Room ', '')}` : `à¸Šà¸±à¹‰à¸™${floor.replace('st Floor', '').replace('nd Floor', '')}`,\n  en: spaceType === 'Room' ? `${roomNumber}` : `${floor}`\n};\n\n// êµ¬ê¸€ë§µ ë§í¬\nconst googleMapsLinks = {\n  'Ekamai': 'https://maps.google.com/?q=Ekamai+BTS+Station+Exit+4',\n  'Phrom Phong': 'https://maps.google.com/?q=Sukhumvit+Soi+24+Ariston+Hotel'\n};\n\nreturn [{\n  json: {\n    action: actionData.action,\n    bookingNumber,\n    name,\n    email,\n    language: langCode,\n    dateFormatted: dateFormatted[langCode],\n    timeFormatted,\n    branch,\n    branchInfo: branchInfo[branch][langCode],\n    spaceInfo: spaceInfo[langCode],\n    guests,\n    specialRequest,\n    googleMapsLink: googleMapsLinks[branch]\n  }\n}];"
      },
      "id": "1e2f3a4b-5c6d-7e8f-9a0b-1c2d3e4f5a6b",
      "name": "ì´ë©”ì¼ ë°ì´í„° ì¤€ë¹„",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        1640,
        400
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{$json.action}}",
              "operation": "equal",
              "value2": "confirm"
            }
          ]
        }
      },
      "id": "2f3a4b5c-6d7e-8f9a-0b1c-2d3e4f5a6b7c",
      "name": "ì´ë©”ì¼ ë¶„ê¸°",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [
        1840,
        400
      ]
    },
    {
      "parameters": {
        "functionCode": "// í™•ì • ì´ë©”ì¼ í…œí”Œë¦¿ ìƒì„± (ê¸°ì¡´ ì›Œí¬í”Œë¡œìš° 2ì™€ ë™ì¼)\nconst data = items[0].json;\n\nconst templates = {\n  ko: {\n    subject: `[ë¶ë§‰ê³¨] ì˜ˆì•½ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤ - ${data.bookingNumber}`,\n    body: `ì•ˆë…•í•˜ì„¸ìš”, ${data.name}ë‹˜!\n\në¶ë§‰ê³¨ ${data.branchInfo.name} ì˜ˆì•½ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“‹ ì˜ˆì•½ ì •ë³´\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nì˜ˆì•½ë²ˆí˜¸: ${data.bookingNumber}\në‚ ì§œ: ${data.dateFormatted}\nì‹œê°„: ${data.timeFormatted}\nì§€ì : ${data.branchInfo.name}\nê³µê°„: ${data.spaceInfo}\nì¸ì›: ${data.guests}ëª…\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ ì˜¤ì‹œëŠ” ê¸¸\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n${data.branchInfo.address}\nì „í™”: ${data.branchInfo.phone}\n\nğŸ—ºï¸ ê¸¸ì°¾ê¸°: ${data.googleMapsLink}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš ï¸ ì˜ˆì•½ ì•ˆë‚´\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâ€¢ ì˜ˆì•½ ì·¨ì†Œ/ë³€ê²½: ì „í™” ë˜ëŠ” ë¼ì¸ìœ¼ë¡œ ì—°ë½ì£¼ì„¸ìš”\nâ€¢ ë£¸ ì˜ˆì•½: í‰ê·  ì´ìš©ì‹œê°„ 3-4ì‹œê°„\nâ€¢ ì˜ì—…ì‹œê°„: 11:00-15:00, 16:00-22:00\n${data.specialRequest ? `â€¢ íŠ¹ë³„ìš”ì²­: ${data.specialRequest}` : ''}\n\në§›ìˆëŠ” ì‹ì‚¬ ì¤€ë¹„í•˜ê³  ê¸°ë‹¤ë¦¬ê² ìŠµë‹ˆë‹¤!\n\nê°ì‚¬í•©ë‹ˆë‹¤.\në¶ë§‰ê³¨ ë“œë¦¼`\n  },\n  th: {\n    subject: `[Bookmakgol] à¸à¸²à¸£à¸ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸¢à¸·à¸™à¸¢à¸±à¸™à¹à¸¥à¹‰à¸§ - ${data.bookingNumber}`,\n    body: `à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¹ˆà¸°/à¸„à¸£à¸±à¸š à¸„à¸¸à¸“${data.name}!\n\nà¸à¸²à¸£à¸ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸—à¸µà¹ˆ Bookmakgol ${data.branchInfo.name} à¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸¢à¸·à¸™à¸¢à¸±à¸™à¹à¸¥à¹‰à¸§\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸­à¸‡\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nà¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸à¸²à¸£à¸ˆà¸­à¸‡: ${data.bookingNumber}\nà¸§à¸±à¸™à¸—à¸µà¹ˆ: ${data.dateFormatted}\nà¹€à¸§à¸¥à¸²: ${data.timeFormatted}\nà¸ªà¸²à¸‚à¸²: ${data.branchInfo.name}\nà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ: ${data.spaceInfo}\nà¸ˆà¸³à¸™à¸§à¸™: ${data.guests} à¸—à¹ˆà¸²à¸™\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n${data.branchInfo.address}\nà¹‚à¸—à¸£: ${data.branchInfo.phone}\n\nğŸ—ºï¸ à¸™à¸³à¸—à¸²à¸‡: ${data.googleMapsLink}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš ï¸ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸­à¸‡\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâ€¢ à¸¢à¸à¹€à¸¥à¸´à¸/à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡: à¹‚à¸—à¸£à¸«à¸£à¸·à¸­à¹à¸ˆà¹‰à¸‡à¸—à¸²à¸‡ Line\nâ€¢ à¸à¸²à¸£à¸ˆà¸­à¸‡à¸«à¹‰à¸­à¸‡: à¹€à¸§à¸¥à¸²à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹‚à¸”à¸¢à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ 3-4 à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡\nâ€¢ à¹€à¸§à¸¥à¸²à¹€à¸›à¸´à¸”à¹ƒà¸«à¹‰à¸šà¸£à¸´à¸à¸²à¸£: 11:00-15:00, 16:00-22:00\n${data.specialRequest ? `â€¢ à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸à¸´à¹€à¸¨à¸©: ${data.specialRequest}` : ''}\n\nà¹€à¸•à¸£à¸µà¸¢à¸¡à¸­à¸²à¸«à¸²à¸£à¸­à¸£à¹ˆà¸­à¸¢à¸£à¸­à¸„à¸¸à¸“à¸­à¸¢à¸¹à¹ˆà¸™à¸°à¸„à¸°/à¸„à¸£à¸±à¸š!\n\nà¸‚à¸­à¸šà¸„à¸¸à¸“à¸„à¹ˆà¸°/à¸„à¸£à¸±à¸š\nBookmakgol`\n  },\n  en: {\n    subject: `[Bookmakgol] Your Reservation is Confirmed - ${data.bookingNumber}`,\n    body: `Hello ${data.name},\n\nYour reservation at Bookmakgol ${data.branchInfo.name} has been confirmed.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“‹ Booking Information\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nBooking Number: ${data.bookingNumber}\nDate: ${data.dateFormatted}\nTime: ${data.timeFormatted}\nBranch: ${data.branchInfo.name}\nSpace: ${data.spaceInfo}\nParty Size: ${data.guests} guests\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ Location\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n${data.branchInfo.address}\nPhone: ${data.branchInfo.phone}\n\nğŸ—ºï¸ Directions: ${data.googleMapsLink}\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâš ï¸ Important Information\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâ€¢ Cancel/Modify: Please call or message via Line\nâ€¢ Private Room: Average duration 3-4 hours\nâ€¢ Operating Hours: 11:00-15:00, 16:00-22:00\n${data.specialRequest ? `â€¢ Special Requests: ${data.specialRequest}` : ''}\n\nWe look forward to serving you!\n\nBest regards,\nBookmakgol`\n  }\n};\n\nconst template = templates[data.language];\n\nreturn [{\n  json: {\n    ...data,\n    emailSubject: template.subject,\n    emailBody: template.body\n  }\n}];"
      },
      "id": "3a4b5c6d-7e8f-9a0b-1c2d-3e4f5a6b7c8d",
      "name": "í™•ì • ì´ë©”ì¼ í…œí”Œë¦¿",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        2040,
        300
      ]
    },
    {
      "parameters": {
        "functionCode": "// ì·¨ì†Œ ì´ë©”ì¼ í…œí”Œë¦¿ ìƒì„±\nconst data = items[0].json;\n\nconst templates = {\n  ko: {\n    subject: `[ë¶ë§‰ê³¨] ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤ - ${data.bookingNumber}`,\n    body: `ì•ˆë…•í•˜ì„¸ìš”, ${data.name}ë‹˜.\n\në¶ë§‰ê³¨ ${data.branchInfo.name} ì˜ˆì•½ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“‹ ì·¨ì†Œëœ ì˜ˆì•½ ì •ë³´\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nì˜ˆì•½ë²ˆí˜¸: ${data.bookingNumber}\në‚ ì§œ: ${data.dateFormatted}\nì‹œê°„: ${data.timeFormatted}\nì§€ì : ${data.branchInfo.name}\nê³µê°„: ${data.spaceInfo}\nì¸ì›: ${data.guests}ëª…\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ ë¬¸ì˜ì‚¬í•­\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nì·¨ì†Œ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ì—°ë½ì£¼ì„¸ìš”.\n\nì „í™”: ${data.branchInfo.phone}\n\në‹¤ìŒì— ë” ì¢‹ì€ ì„œë¹„ìŠ¤ë¡œ ì°¾ì•„ëµ™ê² ìŠµë‹ˆë‹¤.\n\nê°ì‚¬í•©ë‹ˆë‹¤.\në¶ë§‰ê³¨ ë“œë¦¼`\n  },\n  th: {\n    subject: `[Bookmakgol] à¸à¸²à¸£à¸ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸–à¸¹à¸à¸¢à¸à¹€à¸¥à¸´à¸à¹à¸¥à¹‰à¸§ - ${data.bookingNumber}`,\n    body: `à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¹ˆà¸°/à¸„à¸£à¸±à¸š à¸„à¸¸à¸“${data.name}\n\nà¸à¸²à¸£à¸ˆà¸­à¸‡à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸—à¸µà¹ˆ Bookmakgol ${data.branchInfo.name} à¸–à¸¹à¸à¸¢à¸à¹€à¸¥à¸´à¸à¹à¸¥à¹‰à¸§\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸­à¸‡à¸—à¸µà¹ˆà¸¢à¸à¹€à¸¥à¸´à¸\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nà¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸à¸²à¸£à¸ˆà¸­à¸‡: ${data.bookingNumber}\nà¸§à¸±à¸™à¸—à¸µà¹ˆ: ${data.dateFormatted}\nà¹€à¸§à¸¥à¸²: ${data.timeFormatted}\nà¸ªà¸²à¸‚à¸²: ${data.branchInfo.name}\nà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆ: ${data.spaceInfo}\nà¸ˆà¸³à¸™à¸§à¸™: ${data.guests} à¸—à¹ˆà¸²à¸™\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ à¸ªà¸­à¸šà¸–à¸²à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nà¸«à¸²à¸à¸¡à¸µà¸‚à¹‰à¸­à¸ªà¸‡à¸ªà¸±à¸¢à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¸à¸²à¸£à¸¢à¸à¹€à¸¥à¸´à¸ à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¹€à¸£à¸²\n\nà¹‚à¸—à¸£: ${data.branchInfo.phone}\n\nà¸‚à¸­à¸šà¸„à¸¸à¸“à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¹ƒà¸ˆ\nBookmakgol`\n  },\n  en: {\n    subject: `[Bookmakgol] Your Reservation has been Cancelled - ${data.bookingNumber}`,\n    body: `Hello ${data.name},\n\nYour reservation at Bookmakgol ${data.branchInfo.name} has been cancelled.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“‹ Cancelled Booking Information\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nBooking Number: ${data.bookingNumber}\nDate: ${data.dateFormatted}\nTime: ${data.timeFormatted}\nBranch: ${data.branchInfo.name}\nSpace: ${data.spaceInfo}\nParty Size: ${data.guests} guests\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ“ Contact Information\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nIf you have any questions about this cancellation, please contact us.\n\nPhone: ${data.branchInfo.phone}\n\nThank you for your understanding.\n\nBest regards,\nBookmakgol`\n  }\n};\n\nconst template = templates[data.language];\n\nreturn [{\n  json: {\n    ...data,\n    emailSubject: template.subject,\n    emailBody: template.body\n  }\n}];"
      },
      "id": "4b5c6d7e-8f9a-0b1c-2d3e-4f5a6b7c8d9e",
      "name": "ì·¨ì†Œ ì´ë©”ì¼ í…œí”Œë¦¿",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        2040,
        500
      ]
    },
    {
      "parameters": {
        "sendTo": "={{$json.email}}",
        "subject": "={{$json.emailSubject}}",
        "emailType": "text",
        "message": "={{$json.emailBody}}",
        "options": {}
      },
      "id": "5c6d7e8f-9a0b-1c2d-3e4f-5a6b7c8d9e0f",
      "name": "ê³ ê° ì´ë©”ì¼ ë°œì†¡",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 1,
      "position": [
        2240,
        400
      ]
    },
    {
      "parameters": {
        "respondWith": "html",
        "responseBody": "<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ì²˜ë¦¬ ì™„ë£Œ</title>\n    <style>\n        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #f8f9fa; }\n        .success { color: #28a745; }\n        .info { color: #17a2b8; }\n        .container { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 500px; margin: 0 auto; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h2 class=\"success\">âœ… ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>\n        <p><strong>ì˜ˆì•½ë²ˆí˜¸:</strong> {{$json.bookingNumber}}</p>\n        <p><strong>ê³ ê°:</strong> {{$json.name}}</p>\n        <p><strong>ì•¡ì…˜:</strong> {{$json.action === 'confirm' ? 'ì˜ˆì•½ í™•ì •' : 'ì˜ˆì•½ ì·¨ì†Œ'}}</p>\n        <hr>\n        <p class=\"info\">ê³ ê°ì—ê²Œ {{$json.action === 'confirm' ? 'í™•ì •' : 'ì·¨ì†Œ'}} ì´ë©”ì¼ì´ ìë™ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n        <p>Notion ë°ì´í„°ë² ì´ìŠ¤ë„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n    </div>\n</body>\n</html>",
        "options": {}
      },
      "id": "6d7e8f9a-0b1c-2d3e-4f5a-6b7c8d9e0f1a",
      "name": "ì„±ê³µ ì‘ë‹µ",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        2440,
        400
      ]
    }
  ],
  "connections": {
    "ê´€ë¦¬ì ë²„íŠ¼ Webhook": {
      "main": [
        [
          {
            "node": "ì•¡ì…˜ íŒŒì‹±",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì•¡ì…˜ íŒŒì‹±": {
      "main": [
        [
          {
            "node": "ì˜¤ë¥˜ ì²´í¬",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜¤ë¥˜ ì²´í¬": {
      "main": [
        [
          {
            "node": "ì˜¤ë¥˜ ì‘ë‹µ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ì˜ˆì•½ ì¡°íšŒ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ˆì•½ ì¡°íšŒ": {
      "main": [
        [
          {
            "node": "ì˜ˆì•½ ì¡´ì¬ í™•ì¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ˆì•½ ì¡´ì¬ í™•ì¸": {
      "main": [
        [
          {
            "node": "ì˜ˆì•½ ì—†ìŒ ì‘ë‹µ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ì•¡ì…˜ ë¶„ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì•¡ì…˜ ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "ì˜ˆì•½ í™•ì • ì—…ë°ì´íŠ¸",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ì˜ˆì•½ ì·¨ì†Œ ì—…ë°ì´íŠ¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ˆì•½ í™•ì • ì—…ë°ì´íŠ¸": {
      "main": [
        [
          {
            "node": "ì´ë©”ì¼ ë°ì´í„° ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ˆì•½ ì·¨ì†Œ ì—…ë°ì´íŠ¸": {
      "main": [
        [
          {
            "node": "ì´ë©”ì¼ ë°ì´í„° ì¤€ë¹„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë©”ì¼ ë°ì´í„° ì¤€ë¹„": {
      "main": [
        [
          {
            "node": "ì´ë©”ì¼ ë¶„ê¸°",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì´ë©”ì¼ ë¶„ê¸°": {
      "main": [
        [
          {
            "node": "í™•ì • ì´ë©”ì¼ í…œí”Œë¦¿",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ì·¨ì†Œ ì´ë©”ì¼ í…œí”Œë¦¿",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "í™•ì • ì´ë©”ì¼ í…œí”Œë¦¿": {
      "main": [
        [
          {
            "node": "ê³ ê° ì´ë©”ì¼ ë°œì†¡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì·¨ì†Œ ì´ë©”ì¼ í…œí”Œë¦¿": {
      "main": [
        [
          {
            "node": "ê³ ê° ì´ë©”ì¼ ë°œì†¡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ê³ ê° ì´ë©”ì¼ ë°œì†¡": {
      "main": [
        [
          {
            "node": "ì„±ê³µ ì‘ë‹µ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "timezone": "Asia/Bangkok"
  },
  "versionId": "1",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "id": "bookmakgol-button-handler",
  "tags": []
}

